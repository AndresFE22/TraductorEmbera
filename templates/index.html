<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>Traductor</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>
    <div class="traductor-container">
      <div class="traductorandconfig">
        <div class="traductor-title">
          <h1>Traductor</h1>
        </div>
        <div class="configpos">
          <figure>
            <img src="/static/src/usuario-de-perfil.svg" alt="usuario" data-enlace="/static/ingresar.html" id="btn-abrir">
          </figure>
         
        </div>     
      </div>    
      <div class="form-container">
        <form action="/" method="POST" id="translate-form">
          <div class="inter">
          
          
          
          <div class="places">
            <div class="select">
              <select name="trd" id="1">
                <option value="0">Español</option>
                <option value="1">Embeera</option>
                <option value="2">Wayuunaiki</option>
              </select>
              
              <input type="text" id="input1" name="text1" placeholder="">
            </div>
          
            <div class="exchange">
              <figure>
                <img src="/static/src/120846.svg" alt="icono" onclick="cambiarIdiomas()">
              </figure>
            
            </div>
          

            
            <div class="select">
              <select name="trd2" id="2">
                <option value="0">Español</option>
                <option value="1">Embera</option>
                <option value="2">Wayuunaiki</option>
              </select>
              <input type="text" id="input2" name="text2" readonly disabled value="{{ traduccion }}">
            </div>
            </div>
          </div>
         
          
          <div class="but">
            <button type="submit">Traducir</button>
          </div>
        </form>
      </div>
    </div>

    <div id="mi-modal" class="modal">
        <div class="modal-contenido">
            
          <span class="modal-cerrar">&times;</span>
          <iframe id="mi-iframe">
            
          </iframe>
        </div>
      </div>
  
    <script src=""https://code.jquery.com/jquery-3.6.0.min.js"">


      $(document).ready(function() {
        // Cuando se envía el formulario, se hace la petición AJAX
        $('#translate-form').submit(function(event) {
          event.preventDefault(); // Evita que se recargue la página
          $.ajax({
            url: '/',
            method: 'POST',
            data: $('#translate-form').serialize(),
            success: function(response) {
              console.log(response);
              // Si la petición es exitosa, se muestra el resultado en el div correspondiente
              $('#input2').val(response.traduccion);
            },
            error: function(xhr, status, error) {
              // Si hay un error en la petición, se muestra un mensaje de error
              $('#input2').text('Error: ' + error);
            }
          });
        });
      });
    


function cambiarIdiomas() {

   // Obtener los valores actuales de los select

   let select1 = document.getElementById('1');
   let select2 = document.getElementById('2');
   console.log(select1);
    console.log(select2);


   //Guardar los valores de los name de cada select

   let name1 = select1.getAttribute('name');
   let name2 = select2.getAttribute('name');

   //Intercambiar los name de los select:

   select1.setAttribute('name', name2);
   select2.setAttribute('name', name1);

   //Intermabiar valores y textos cada select

    let tempText = select1.options[select1.selectedIndex].text;

  
  select1.options[select1.selectedIndex].text = select2.options[select2.selectedIndex].text;

  select2.options[select2.selectedIndex].text = tempText;
  console.log(tempText)
  



   //Actualizar los valores de los placeholders de los input

   //let placeholder1 = select1.options[select1.selectedIndex].text;
   //let placeholder2 = select2.options[select2.selectedIndex].text;

   //document.getElementById('input1').setAttribute('placeholder', placeholder1);

   //document.getElementById('input2').setAttribute('placeholder', placeholder2);




}

const btnAbrir = document.getElementById('btn-abrir');
const modal = document.getElementById('mi-modal');
const modalCerrar = document.getElementsByClassName('modal-cerrar')[0];
const modalIframe = document.getElementById('mi-iframe');

btnAbrir.addEventListener('click', () => {
  const enlace = btnAbrir.getAttribute('data-enlace');
  modalIframe.setAttribute('src', enlace);
  modal.style.display = 'block';
});

modalCerrar.addEventListener('click', () => {
  modal.style.display = 'none';
});

window.addEventListener('click', (evento) => {
  if (evento.target == modal) {
    modal.style.display = 'none';
  }
});

    


      
    </script>
  </body>
</html>
